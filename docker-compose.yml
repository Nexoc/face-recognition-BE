
# docker-compose logs -f face-api
# LOGS inside

services:
  # –°–µ—Ä–≤–∏—Å —Å FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
  face-api:
    build: .                            # –°–æ–±–∏—Ä–∞–µ–º Docker-–æ–±—Ä–∞–∑ –∏–∑ Dockerfile –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    env_file:
      - .env                            # –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env (–Ω–∞–ø—Ä–∏–º–µ—Ä, LOG_LEVEL)
    ports:
      - "8000:8000"                     # –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ—Ä—Ç 8000 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ —Ö–æ—Å—Ç
    depends_on:
      - qdrant                         # –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å–∫–∞–µ–º Qdrant, –∑–∞—Ç–µ–º —ç—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å
    volumes:
      - .:/app                         # –ú–æ–Ω—Ç–∏—Ä—É–µ–º —Ç–µ–∫—É—â—É—é –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞–∫ /app
                                       # –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å –∫–æ–¥ –ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞
      - ./id_counter.txt:/app/id_counter.txt  #  –°–≤—è–∑—å –º–µ–∂–¥—É –ª–æ–∫–∞–ª—å–Ω—ã–º –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º

  # –°–µ—Ä–≤–∏—Å Qdrant (–≤–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
  qdrant:
    image: qdrant/qdrant               # –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ Qdrant –∏–∑ Docker Hub
    ports:
      - "6333:6333"                    # REST API
      - "6334:6334"                    # gRPC API (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, –Ω–æ –ø—É—Å—Ç—å –±—É–¥–µ—Ç)
    volumes:
      - qdrant_storage:/qdrant/storage # –ú–æ–Ω—Ç–∏—Ä—É–µ–º —Ç–æ–º, —á—Ç–æ–±—ã –¥–∞–Ω–Ω—ã–µ Qdrant —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏

# üóÉ–û–±—ä—è–≤–ª—è–µ–º volume ‚Äî –æ–±–ª–∞—Å—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö Qdrant
volumes:
  qdrant_storage:


